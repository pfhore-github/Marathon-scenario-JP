Triggers = {}

function Triggers.got_item(type, player)
	Global:got_item(type, player)
end

function Triggers.monster_damaged(monster, aggressor_monster, damage_type, damage_amount, projectile)
	Global:monster_damaged(monster, aggressor_monster, damage_type, damage_amount, projectile)
end

function Triggers.player_damaged(victim, aggressor_player, aggressor_monster, damage_type, damage_amount, projectile)
	Global:player_damaged(victim, aggressor_player, aggressor_monster, damage_type, damage_amount, projectile)
end

function Triggers.player_killed(player, aggressor_player, action, projectile)
	Global:player_killed(player, aggressor_player, action, projectile)
end

function Triggers.player_revived(p)
	Global:player_revived(p, 7, 0, 0, 0, 0, 0, 150)
	if Level._addchip then
		p.items["uplink chip"] = 1
		Level._addchip = false -- now we no longer need to add a chip
	end
end

function Triggers.init(restoring)
	Global:initialize(restoring, 7, 0, 0, 0, 0, 0, 150)
	Level.stash["names"] = "jjaro"
	Level.stash["ignore"] = "5"

	if not restoring then -- not loading from save; let's make sure at least one player has a chip
		Level._addchip = false
		local chips = 0
		for p in Players() do
			chips = chips + p.items["uplink chip"] -- count chips
		end
		if chips == 0 then -- they don't. hopefully this is because they are vid starting, but I could've messed up somewhere. or someone could be cheating
			Level._addchip = true -- so now we'll have to give one of them a chip
			for p in Players() do
				if Level._addchip and not p.dead then
					p.items["uplink chip"] = 1 -- give a chip to the first non-dead player we find
					Level._addchip = false -- now we don't need to add another chip
				end
			end
		end -- if we still haven't added a chip, then everybody's dead, Dave. the level flag tells us to add the chip when one of them revives
	end

	-- set display title for HUD
	Level.stash["maintitle"] = string.format("Haec caverna n%cn f%crm%cti%c n%ct%cr%clis", 151, 151, 135, 151, 135, 156, 135)
	Level.stash["subtitle"] = "This Cave Is Not a Natural Formation"
end

function Triggers.idle()
	Global:idlemain()
end

function Triggers.cleanup()
	Global:cleanup()
end